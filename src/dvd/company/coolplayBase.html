<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>基地列表</title>
</head>
<body>

<div class="super-theme-example">
    <div class="search-form-item col-md-4">
        <label class="label-top">基地名称：</label>
        <input name="baseName" class="easyui-validatebox easyui-textbox" prompt="请输入基地名称">
    </div>

    <div class="search-form-item col-md-4">
        <label class="label-top">基地状态：</label>

        <select class="easyui-combobox" data-options="editable:false,panelHeight:null" name="isClose">
            <option value="" selected>全部</option>
            <option value="1">正常</option>
            <option value="0">关闭</option>
        </select>
    </div>

    <div class="search-form-item col-md-3">
        <a href="javascript:void(0)" onclick="refreshCoolplayBase()" class="easyui-linkbutton primary">查询</a>
        <a href="javascript:void(0)" onclick="addCoolplayBase()" class="easyui-linkbutton primary">创建基地</a>
    </div>
</div>

<div class="clear"></div>

<div class="super-theme-example">
    <div style="height: 340px;">
        <table id="coolplayBaseTab"></table>
    </div>

    <div id="coolplayBaseWin" style="display: none;padding-top:30px;" title="创建基地">
        <div class="form-item col-md-12">
            <label class="label-top">基地全称：</label>

            <input class="easyui-validatebox easyui-textbox" prompt="请输入基地全称" name="baseFullName">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">基地简称：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入基地简称" name="baseName">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">基地基本信息：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入基地基本信息" name="baseDesc">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">地图标点：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入地图标点" name="">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">起飞场GPS：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入起飞场GPS" name="departuresGps">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">起飞场海拔高度：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入起飞场海拔高度" name="departuresHeight">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">降落场GPS：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入降落场GPS" name="landGps">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">降落场海拔高度：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入降落场海拔高度" name="landHeight">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">可飞风向：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入可飞风向" name="flyDirection">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">监控视频url：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入监控视频url" name="monitorVideoUrl">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">基地类型：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入基地类型" name="baseType">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">标签：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入标签" name="labelIds">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">开放时间：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入开放时间" name="openTime">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">容纳人数：</label>
            <input class="easyui-validatebox easyui-textbox" prompt="请输入容纳人数" name="capacityCnt">
        </div>

        <div class="form-item col-md-12">
            <label class="label-top">状态：</label>

            <select class="easyui-combobox" data-options="editable:false,panelHeight:null" name="isClose">
                <option value="" selected>全部</option>
                <option value="1">正常</option>
                <option value="0">关闭</option>
            </select>
        </div>

        <div class="form-item col-md-12">
            <a href="javascript:void(0)" class="easyui-linkbutton primary">确认新增</a>
            <a href="javascript:void(0)" class="easyui-linkbutton primary">取消</a>
        </div>
    </div>
</div>

<script type="text/javascript">
    ;(function ($, window, document, undefined){

        $('#coolplayBaseTab').datagrid({
            url: App.href + '/api/company/coolplayBase/list',
            fit: true,
            pagination: true,
            fitColumns: true,
            method: 'GET',
            pageSize: 10,
            pageList: [10, 25, 50, 100, 200],
            height: 340,
            queryParams: {},
            toolbar: [],
            loadFilter: function(data) {
                if (data.code === 401) {
                    App.showMsg('token失效,请登录!');
                    window.location.href = App.href + '/login.html';
                    return {"total":0, "rows": "[]"};
                } else {
                    return data;
                }
            },
            onBeforeLoad: function (param) {
                var baseName = $("input[name=baseName]").val();
                var isClose = $("input[name=isClose]").val();

                param.baseName = baseName;
                param.isClose = isClose;
            },
            columns: [
                [{
                    field: 'id',
                    title: '编号',
                    sortable: true,
                    width: 50
                }, {
                    field: 'contactName',
                    title: '联系人',
                    width: 50
                }, {
                    field: 'baseName',
                    title: '基地名称',
                    width: 50
                },  {
                    field: 'contactAddress',
                    title: '基地地址',
                    width: 50
                },  {
                    field: 'contactPhone',
                    title: '电话',
                    width: 50
                },  {
                    field: 'capacityCnt',
                    title: '容纳人数',
                    width: 50
                },  {
                    field: 'ctime',
                    title: '创建时间',
                    width: 50
                },  {
                    field: 'companyUserId',
                    title: '创建人',
                    width: 50
                },  {
                    field: 'status',
                    title: '状态',
                    width: 50
                },  {
                    field: 'custom_col1',
                    title: '操作',
                    width: 50,
                    align: 'center',
                    formatter: function(value, row, index) {
                        var btns = new Array();
                        btns.push('<a href="javascript:void(0)" class="easyui-linkbutton primary" onclick="">详情</a>&nbsp;');
                        btns.push('<a href="javascript:void(0)" class="easyui-linkbutton primary" onclick="">删除</a>&nbsp;');
                        btns.push('<a href="javascript:void(0)" class="easyui-linkbutton primary" onclick="">关闭</a>');
                        return btns.join('');
                    }
                }]
            ]
        });
    })(jQuery, window, document);


    function refreshCoolplayBase() {
        $('#coolplayBaseTab').datagrid('reload');
    }

    /**
     * 添加公司基地
     *
     */
    function addCoolplayBase() {
        $('#coolplayBaseWin').window({
            width: "80%",
            height: "80%",
            modal:true
        });
    }

</script>
</body>
</html>